// Pannellum 22ff9ab, https://github.com/mpetroff/pannellum
window.libpannellum=function(z,h,t){function Q(R,e,w,M){function Q(a,f){return 1==a.level&&1!=f.level?-1:1==f.level&&1!=a.level?1:f.timestamp-a.timestamp}function na(a,f){return a.level!=f.level?a.level-f.level:a.diff-f.diff}function V(a,f,d,e,g,c){this.vertices=a;this.side=f;this.level=d;this.x=e;this.y=g;this.path=c.replace("%s",f).replace("%l",d).replace("%x",e).replace("%y",g)}function ga(a,f,h,l,g){var c;var k=f.vertices;c=Y(a,k.slice(0,3));var q=Y(a,k.slice(3,6)),u=Y(a,k.slice(6,9)),k=Y(a,k.slice(9,
12)),x=c[0]+q[0]+u[0]+k[0];-4==x||4==x?c=!1:(x=c[1]+q[1]+u[1]+k[1],c=-4==x||4==x?!1:4!=c[2]+q[2]+u[2]+k[2]);if(c){c=f.vertices;q=c[0]+c[3]+c[6]+c[9];u=c[1]+c[4]+c[7]+c[10];k=c[2]+c[5]+c[8]+c[11];x=Math.sqrt(q*q+u*u+k*k);k=Math.asin(k/x);q=Math.atan2(u,q)-l;q+=q>Math.PI?-2*Math.PI:q<-Math.PI?2*Math.PI:0;q=Math.abs(q);f.diff=Math.acos(Math.sin(h)*Math.sin(k)+Math.cos(h)*Math.cos(k)*Math.cos(q));q=!1;for(u=0;u<d.nodeCache.length;u++)if(d.nodeCache[u].path==f.path){q=!0;d.nodeCache[u].timestamp=d.nodeCacheTimestamp++;
d.nodeCache[u].diff=f.diff;d.currentNodes.push(d.nodeCache[u]);break}q||(f.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(f),d.nodeCache.push(f));if(f.level<d.level){var k=e.cubeResolution*Math.pow(2,f.level-e.maxLevel),q=Math.ceil(k*e.invTileResolution)-1,u=k%e.tileResolution*2,A=2*k%e.tileResolution;0===A&&(A=e.tileResolution);0===u&&(u=2*e.tileResolution);x=0.5;if(f.x==q||f.y==q)x=1-e.tileResolution/(e.tileResolution+A);var s=1-x,k=[],w=x,B=x,C=x,m=s,t=s,b=s;if(A<e.tileResolution)if(f.x==
q&&f.y!=q){if(t=B=0.5,"d"==f.side||"u"==f.side)b=C=0.5}else f.x!=q&&f.y==q&&(m=w=0.5,"l"==f.side||"r"==f.side)&&(b=C=0.5);u<e.tileResolution&&(f.x==q&&(w=0,m=1,"l"==f.side||"r"==f.side)&&(C=0,b=1),f.y==q&&(B=0,t=1,"d"==f.side||"u"==f.side)&&(C=0,b=1));A=[c[0],c[1],c[2],c[0]*w+c[3]*m,c[1]*x+c[4]*s,c[2]*C+c[5]*b,c[0]*w+c[6]*m,c[1]*B+c[7]*t,c[2]*C+c[8]*b,c[0]*x+c[9]*s,c[1]*B+c[10]*t,c[2]*C+c[11]*b];A=new V(A,f.side,f.level+1,2*f.x,2*f.y,e.fullpath);k.push(A);f.x==q&&u<e.tileResolution||(A=[c[0]*w+c[3]*
m,c[1]*x+c[4]*s,c[2]*C+c[5]*b,c[3],c[4],c[5],c[3]*x+c[6]*s,c[4]*B+c[7]*t,c[5]*C+c[8]*b,c[0]*w+c[6]*m,c[1]*B+c[7]*t,c[2]*C+c[8]*b],A=new V(A,f.side,f.level+1,2*f.x+1,2*f.y,e.fullpath),k.push(A));f.x==q&&u<e.tileResolution||f.y==q&&u<e.tileResolution||(A=[c[0]*w+c[6]*m,c[1]*B+c[7]*t,c[2]*C+c[8]*b,c[3]*x+c[6]*s,c[4]*B+c[7]*t,c[5]*C+c[8]*b,c[6],c[7],c[8],c[9]*w+c[6]*m,c[10]*x+c[7]*s,c[11]*C+c[8]*b],A=new V(A,f.side,f.level+1,2*f.x+1,2*f.y+1,e.fullpath),k.push(A));f.y==q&&u<e.tileResolution||(A=[c[0]*
x+c[9]*s,c[1]*B+c[10]*t,c[2]*C+c[11]*b,c[0]*w+c[6]*m,c[1]*B+c[7]*t,c[2]*C+c[8]*b,c[9]*w+c[6]*m,c[10]*x+c[7]*s,c[11]*C+c[8]*b,c[9],c[10],c[11]],A=new V(A,f.side,f.level+1,2*f.x,2*f.y+1,e.fullpath),k.push(A));for(f=0;f<k.length;f++)ga(a,k[f],h,l,g)}}}function ia(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function Z(a,f,d){var e=Math.sin(f);f=Math.cos(f);
if("x"==d)return[a[0],f*a[1]+e*a[2],f*a[2]-e*a[1],a[3],f*a[4]+e*a[5],f*a[5]-e*a[4],a[6],f*a[7]+e*a[8],f*a[8]-e*a[7]];if("y"==d)return[f*a[0]-e*a[2],a[1],f*a[2]+e*a[0],f*a[3]-e*a[5],a[4],f*a[5]+e*a[3],f*a[6]-e*a[8],a[7],f*a[8]+e*a[6]];if("z"==d)return[f*a[0]+e*a[1],f*a[1]-e*a[0],a[2],f*a[3]+e*a[4],f*a[4]-e*a[3],a[5],f*a[6]+e*a[7],f*a[7]-e*a[6],a[8]]}function ja(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}function ua(d){d.texture||(d.texture=a.createTexture(),
d.image=new Image,d.image.crossOrigin="anonymous",d.image.onload=function(){var f=d.image;a.bindTexture(a.TEXTURE_2D,d.texture);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);d.textureLoaded=!0;delete d.image},
d.image.src=encodeURI(d.path+"."+e.extension))}function Y(a,f){var d=[a[0]*f[0]+a[1]*f[1]+a[2]*f[2],a[4]*f[0]+a[5]*f[1]+a[6]*f[2],a[11]+a[8]*f[0]+a[9]*f[1]+a[10]*f[2],1/(a[12]*f[0]+a[13]*f[1]+a[14]*f[2])],e=d[0]*d[3],g=d[1]*d[3],d=d[2]*d[3],c=[0,0,0];-1>e&&(c[0]=-1);1<e&&(c[0]=1);-1>g&&(c[1]=-1);1<g&&(c[1]=1);if(-1>d||1<d)c[2]=1;return c}var s=h.createElement("canvas");s.style.width=s.style.height="100%";R.appendChild(s);typeof w===t&&(w="equirectangular");var d,a,pa,L,$,aa;this.init=function(X,f,
F,z){var g;"cubemap"==w&&0!==(e[0].width&e[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a=s.getContext("experimental-webgl",{alpha:!1,depth:!1}));if(!a&&("multires"==w&&e.hasOwnProperty("fallbackPath")||"cubemap"==w)&&("WebkitAppearance"in h.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){L&&
R.removeChild(L);L=h.createElement("div");L.className="pnlm-world";X=e.basePath?e.basePath+e.fallbackPath:e.fallbackPath;var c="frblud".split(""),k=0;f=function(){var a=h.createElement("canvas");a.className="pnlm-face pnlm-"+c[this.side]+"face";L.appendChild(a);var d=a.getContext("2d");a.style.width=this.width+4+"px";a.style.height=this.height+4+"px";a.width=this.width+4;a.height=this.height+4;d.drawImage(this,2,2);var f=d.getImageData(0,0,a.width,a.height),e=f.data,g,m;for(g=2;g<a.width-2;g++)for(m=
0;4>m;m++)e[4*(g+a.width)+m]=e[4*(g+2*a.width)+m],e[4*(g+a.width*(a.height-2))+m]=e[4*(g+a.width*(a.height-3))+m];for(g=2;g<a.height-2;g++)for(m=0;4>m;m++)e[4*(g*a.width+1)+m]=e[4*(g*a.width+2)+m],e[4*((g+1)*a.width-2)+m]=e[4*((g+1)*a.width-3)+m];for(m=0;4>m;m++)e[4*(a.width+1)+m]=e[4*(2*a.width+2)+m],e[4*(2*a.width-2)+m]=e[4*(3*a.width-3)+m],e[4*(a.width*(a.height-2)+1)+m]=e[4*(a.width*(a.height-3)+2)+m],e[4*(a.width*(a.height-1)-2)+m]=e[4*(a.width*(a.height-2)-3)+m];for(g=1;g<a.width-1;g++)for(m=
0;4>m;m++)e[4*g+m]=e[4*(g+a.width)+m],e[4*(g+a.width*(a.height-1))+m]=e[4*(g+a.width*(a.height-2))+m];for(g=1;g<a.height-1;g++)for(m=0;4>m;m++)e[g*a.width*4+m]=e[4*(g*a.width+1)+m],e[4*((g+1)*a.width-1)+m]=e[4*((g+1)*a.width-2)+m];for(m=0;4>m;m++)e[m]=e[4*(a.width+1)+m],e[4*(a.width-1)+m]=e[4*(2*a.width-2)+m],e[a.width*(a.height-1)*4+m]=e[4*(a.width*(a.height-2)+1)+m],e[4*(a.width*a.height-1)+m]=e[4*(a.width*(a.height-1)-2)+m];d.putImageData(f,0,0);k++;6==k&&(pa=this.width,R.appendChild(L),z())};
for(g=0;6>g;g++)F=new Image,F.crossOrigin="anonymous",F.side=g,F.onload=f,F.src="multires"==w?encodeURI(X.replace("%s",c[g])+"."+e.extension):encodeURI(e[g].src)}else{if(!a)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};e.fullpath=e.basePath?e.basePath+e.path:e.path;e.invTileResolution=1/e.tileResolution;var q=ia();$=[];for(g=0;6>g;g++)$[g]=q.slice(12*g,12*g+12),q=ia();if("equirectangular"==w){if(g=Math.max(e.width,e.height),q=a.getParameter(a.MAX_TEXTURE_SIZE),g>q)throw console.log("Error: The image is too big; it's "+
g+"px wide, but this device's maximum supported width is "+q+"px."),{type:"webgl size error",width:g,maxWidth:q};}else if("cubemap"==w&&(g=e[0].width,q=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),g>q))throw console.log("Error: The cube face image is too big; it's "+g+"px wide, but this device's maximum supported width is "+q+"px."),{type:"webgl size error",width:g,maxWidth:q};e.horizonPitch!==t&&e.horizonRoll!==t&&(aa=[e.horizonPitch,e.horizonRoll]);g=a.TEXTURE_2D;a.viewport(0,0,s.width,s.height);
var q=a.createShader(a.VERTEX_SHADER),u=l;"multires"==w&&(u=y);a.shaderSource(q,u);a.compileShader(q);var u=a.createShader(a.FRAGMENT_SHADER),x=ba;"cubemap"==w?(g=a.TEXTURE_CUBE_MAP,x=Fa):"multires"==w&&(x=ca);a.shaderSource(u,x);a.compileShader(u);d=a.createProgram();a.attachShader(d,q);a.attachShader(d,u);a.linkProgram(d);a.getShaderParameter(q,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(q));a.getShaderParameter(u,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(u));a.getProgramParameter(d,
a.LINK_STATUS)||console.log(a.getProgramInfoLog(d));a.useProgram(d);d.drawInProgress=!1;d.texCoordLocation=a.getAttribLocation(d,"a_texCoord");a.enableVertexAttribArray(d.texCoordLocation);"multires"!=w?(d.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,d.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),d.aspectRatio=a.getUniformLocation(d,"u_aspectRatio"),a.uniform1f(d.aspectRatio,
s.width/s.height),d.psi=a.getUniformLocation(d,"u_psi"),d.theta=a.getUniformLocation(d,"u_theta"),d.f=a.getUniformLocation(d,"u_f"),d.h=a.getUniformLocation(d,"u_h"),d.v=a.getUniformLocation(d,"u_v"),d.vo=a.getUniformLocation(d,"u_vo"),d.rot=a.getUniformLocation(d,"u_rot"),a.uniform1f(d.h,X/(2*Math.PI)),a.uniform1f(d.v,f/Math.PI),a.uniform1f(d.vo,F/Math.PI*2),d.texture=a.createTexture(),a.bindTexture(g,d.texture),"cubemap"==w?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,
e[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e[2])):a.texImage2D(g,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e),a.texParameteri(g,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),
a.texParameteri(g,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(g,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(g,a.TEXTURE_MAG_FILTER,a.LINEAR)):(d.vertPosLocation=a.getAttribLocation(d,"a_vertCoord"),a.enableVertexAttribArray(d.vertPosLocation),d.cubeVertBuf=a.createBuffer(),d.cubeVertTexCoordBuf=a.createBuffer(),d.cubeVertIndBuf=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,d.cubeVertTexCoordBuf),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
d.cubeVertIndBuf),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),d.perspUniform=a.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=a.getUniformLocation(d,"u_cubeMatrix"),d.level=-1,d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0);if(0!==a.getError())throw console.log("Error: Something went wrong with WebGL!"),{type:"webgl error"};z()}};this.destroy=function(){R!==t&&(s!==t&&R.removeChild(s),L!==t&&R.removeChild(L))};this.resize=function(){var e=z.devicePixelRatio||
1;s.width=s.clientWidth*e;s.height=s.clientHeight*e;a&&(a.viewport(0,0,s.width,s.height),"multires"!=w&&a.uniform1f(d.aspectRatio,s.width/s.height))};this.resize();this.render=function(h,f,l,y){var g;g=0;y===t&&(y={});y.roll&&(g=y.roll);if(a||"multires"!=w&&"cubemap"!=w){if("multires"!=w){l=2*Math.atan(Math.tan(0.5*l)/(s.width/s.height));l=1/Math.tan(0.5*l);if("equirectangular"==w&&aa!==t){var c=aa[0],k=aa[1],q=h,u=f,x=Math.cos(k)*Math.sin(h)*Math.sin(c)+Math.cos(h)*(Math.cos(c)*Math.cos(f)+Math.sin(k)*
Math.sin(c)*Math.sin(f)),A=-Math.sin(h)*Math.sin(k)+Math.cos(h)*Math.cos(k)*Math.sin(f);h=Math.cos(k)*Math.cos(c)*Math.sin(h)+Math.cos(h)*(-Math.cos(f)*Math.sin(c)+Math.cos(c)*Math.sin(k)*Math.sin(f));h=Math.asin(h);f=Math.atan2(A,x);c=[Math.cos(q)*(Math.sin(k)*Math.sin(c)*Math.cos(u)-Math.cos(c)*Math.sin(u)),Math.cos(q)*Math.cos(k)*Math.cos(u),Math.cos(q)*(Math.cos(c)*Math.sin(k)*Math.cos(u)+Math.sin(u)*Math.sin(c))];k=[-Math.cos(h)*Math.sin(f),Math.cos(h)*Math.cos(f)];k=Math.acos((c[0]*k[0]+c[1]*
k[1])/(Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])*Math.sqrt(k[0]*k[0]+k[1]*k[1])));0>c[2]&&(k=2*Math.PI-k);g+=k}a.uniform1f(d.psi,f);a.uniform1f(d.theta,h);a.uniform1f(d.rot,g);a.uniform1f(d.f,l);!0===M&&"equirectangular"==w&&(a.bindTexture(a.TEXTURE_2D,d.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e));a.drawArrays(a.TRIANGLES,0,6)}else{c=s.width/s.height;k=2*Math.atan(Math.tan(l/2)*s.height/s.width);k=1/Math.tan(k/2);c=[k/c,0,0,0,0,k,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0];for(k=
1;k<e.maxLevel&&s.width>e.tileResolution*Math.pow(2,k-1)*Math.tan(l/2)*0.707;)k++;d.level=k;k=[1,0,0,0,1,0,0,0,1];k=Z(k,-g,"z");k=Z(k,-h,"x");k=Z(k,f,"y");k=[k[0],k[1],k[2],0,k[3],k[4],k[5],0,k[6],k[7],k[8],0,0,0,0,1];a.uniformMatrix4fv(d.perspUniform,!1,new Float32Array(ja(c)));a.uniformMatrix4fv(d.cubeUniform,!1,new Float32Array(ja(k)));c=[c[0]*k[0],c[0]*k[1],c[0]*k[2],0,c[5]*k[4],c[5]*k[5],c[5]*k[6],0,c[10]*k[8],c[10]*k[9],c[10]*k[10],c[11],-k[8],-k[9],-k[10],0];d.nodeCache.sort(Q);200<d.nodeCache.length&&
d.nodeCache.length>d.currentNodes.length+50&&d.nodeCache.splice(200,d.nodeCache.length-200);d.currentNodes=[];k="fbudlr".split("");for(g=0;6>g;g++)q=new V($[g],k[g],1,0,0,e.fullpath),ga(c,q,h,f,l);d.currentNodes.sort(na);for(h=0;h<d.currentNodes.length;h++)if(!d.currentNodes[h].texture){setTimeout(ua(d.currentNodes[h]),0);break}if(!d.drawInProgress){d.drawInProgress=!0;for(h=0;h<d.currentNodes.length;h++)d.currentNodes[h].textureLoaded&&(a.bindBuffer(a.ARRAY_BUFFER,d.cubeVertBuf),a.bufferData(a.ARRAY_BUFFER,
new Float32Array(d.currentNodes[h].vertices),a.STATIC_DRAW),a.vertexAttribPointer(d.vertPosLocation,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,d.cubeVertTexCoordBuf),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,d.currentNodes[h].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));d.drawInProgress=!1}}if(y.returnImage!==t)return s.toDataURL("image/png")}else for(g=pa/2,y={f:"translate3d(-"+(g+2)+"px, -"+(g+2)+"px, -"+g+"px)",b:"translate3d("+(g+2)+
"px, -"+(g+2)+"px, "+g+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(g+2)+"px, -"+g+"px, "+(g+2)+"px) rotateX(270deg)",d:"translate3d(-"+(g+2)+"px, "+g+"px, -"+(g+2)+"px) rotateX(90deg)",l:"translate3d(-"+g+"px, -"+(g+2)+"px, "+(g+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+g+"px, -"+(g+2)+"px, -"+(g+2)+"px) rotateY(270deg)"},l=1/Math.tan(l/2),g=l*s.width/(z.devicePixelRatio||1)/2+"px",f="perspective("+g+") translateZ("+g+") rotateX("+h+"rad) rotateY("+f+"rad) ",
g=Object.keys(y),h=0;6>h;h++)l=L.querySelector(".pnlm-"+g[h]+"face").style,l.webkitTransform=f+y[g[h]],l.transform=f+y[g[h]]};this.isLoading=function(){if(a&&"multires"==w)for(var e=0;e<d.currentNodes.length;e++)if(!d.currentNodes[e].textureLoaded)return!0;return!1};this.getCanvas=function(){return s}}var l="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",y="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",
Fa="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform samplerCube u_image;\nvarying vec2 v_texCoord;\nvoid main() {\nvec3 planePos = vec3(v_texCoord.xy, 0.0);\nplanePos.x *= u_aspectRatio;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nvec3 rotPos = vec3(planePos.x * cosrot - planePos.y * sinrot, planePos.x * sinrot + planePos.y * cosrot, 0.0);\nvec3 viewVector = rotPos - vec3(0.0, 0.0, -u_f);\nfloat sinpsi = sin(-u_psi);\nfloat cospsi = cos(-u_psi);\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nvec3 viewVectorTheta = viewVector;\nviewVectorTheta.z = viewVector.z * costheta - viewVector.y * sintheta;\nviewVectorTheta.y = viewVector.z * sintheta + viewVector.y * costheta;\nvec3 viewVectorPsi = viewVectorTheta;\nviewVectorPsi.x = viewVectorTheta.x * cospsi - viewVectorTheta.z * sinpsi;\nviewVectorPsi.z = viewVectorTheta.x * sinpsi + viewVectorTheta.z * cospsi;\ngl_FragColor = textureCube(u_image, viewVectorPsi);\n}",
ba="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);\nif(lambda > PI)\nlambda = lambda - PI * 2.0;\nif(lambda < -PI)\nlambda = lambda + PI * 2.0;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = vec4(0, 0, 0, 1.0);\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",
ca="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(h,e,l,t){return new Q(h,e,l,t)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(z,h){window.setTimeout(z,1E3/60)}}());
window.pannellum=function(z,h,t){function Q(l,y){function Q(){var a=h.createElement("div");a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==a.getElementsByTagName("i").length)e();else{var p;if("cubemap"==b.type){D=[];for(a=0;6>a;a++)D.push(new Image),D[a].crossOrigin="anonymous";r.load.lbox.style.display="block";r.load.lbar.style.display="none"}else if("multires"==b.type)a=JSON.parse(JSON.stringify(b.multiRes)),b.basePath&&b.multiRes.basePath?a.basePath=b.basePath+b.multiRes.basePath:
b.basePath&&(a.basePath=b.basePath),D=a;else if(!0===b.dynamic)D=b.panorama;else{if(b.panorama===t){e("No panorama image was specified.");return}D=new Image}if("cubemap"==b.type)for(var c=6,d=function(){c--;0===c&&ca()},f=function(a){var b=h.createElement("a");b.href=a.target.src;b.innerHTML=b.href;e("The file "+b.outerHTML+" could not be accessed.")},a=0;a<D.length;a++)D[a].onload=d,D[a].onerror=f,p=b.cubeMap[a],b.basePath&&!ba(p)&&(p=b.basePath+p),D[a].src=encodeURI(p);else if("multires"==b.type)ca();
else if(p="",b.basePath&&(p=b.basePath),!0!==b.dynamic){p=ba(b.panorama)?b.panorama:p+b.panorama;D.onload=function(){z.URL.revokeObjectURL(this.src);ca()};var g=new XMLHttpRequest;g.onloadend=function(){if(200!=g.status){var a=h.createElement("a");a.href=encodeURI(p);a.innerHTML=a.href;e("The file "+a.outerHTML+" could not be accessed.")}R(this.response);r.load.msg.innerHTML=""};g.onprogress=function(a){if(a.lengthComputable){r.load.lbarFill.style.width=a.loaded/a.total*100+"%";var b,N;1E6<a.total?
(b="MB",N=(a.loaded/1E6).toFixed(2),a=(a.total/1E6).toFixed(2)):1E3<a.total?(b="kB",N=(a.loaded/1E3).toFixed(1),a=(a.total/1E3).toFixed(1)):(b="B",N=a.loaded,a=a.total);r.load.msg.innerHTML=N+" / "+a+" "+b}else r.load.lbox.style.display="block",r.load.lbar.style.display="none"};try{g.open("GET",p,!0)}catch(k){e("There is something wrong with the panorama URL.")}g.responseType="blob";g.setRequestHeader("Accept","image/*,*/*;q=0.9");g.send()}l.classList.add("pnlm-grab");l.classList.remove("pnlm-grabbing")}}
function ba(a){return/^(?:[a-z]+:)?\/\//i.test(a)|"/"==a[0]}function ca(){E=new libpannellum.renderer(G,D,b.type,b.dynamic);!0!==b.dynamic&&(D=t);Aa||(Aa=!0,l.addEventListener("mousedown",Da,!1),h.addEventListener("mousemove",V,!1),h.addEventListener("mouseup",ga,!1),l.addEventListener("mousewheel",d,!1),l.addEventListener("DOMMouseScroll",d,!1),l.addEventListener("mozfullscreenchange",ha,!1),l.addEventListener("webkitfullscreenchange",ha,!1),l.addEventListener("msfullscreenchange",ha,!1),l.addEventListener("fullscreenchange",
ha,!1),z.addEventListener("resize",X,!1),z.addEventListener("orientationchange",X,!1),l.addEventListener("keydown",a,!1),l.addEventListener("keyup",L,!1),l.addEventListener("blur",pa,!1),h.addEventListener("mouseleave",ga,!1),l.addEventListener("touchstart",ia,!1),l.addEventListener("touchmove",Z,!1),l.addEventListener("touchend",ja,!1),l.addEventListener("pointerdown",ua,!1),l.addEventListener("pointermove",Y,!1),l.addEventListener("pointerup",s,!1),l.addEventListener("pointerleave",s,!1),z.navigator.pointerEnabled&&
(l.style.touchAction="none"));try{E.init(b.haov*Math.PI/180,b.vaov*Math.PI/180,b.vOffset*Math.PI/180,k)}catch(N){"webgl error"==N.type||"no webgl"==N.type?e():"webgl size error"==N.type&&e("This panorama is too big for your device! It's "+N.width+"px wide, but your device only supports images up to "+N.maxWidth+"px wide. Try another device. (If you're the author, try scaling down the image.)")}setTimeout(function(){},500)}function R(a){var p=new FileReader;p.addEventListener("loadend",function(){var c=
p.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var d=c.indexOf("\u00ff\u00c2");(0>d||65536<d)&&e("Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).")}d=c.indexOf("<x:xmpmeta");if(-1<d&&!0!==b.ignoreGPanoXMP){var f=c.substring(d,c.indexOf("</x:xmpmeta>")+12),g=function(a){var b;0<=f.indexOf(a+'="')?(b=f.substring(f.indexOf(a+'="')+a.length+2),b=b.substring(0,b.indexOf('"'))):0<=
f.indexOf(a+">")&&(b=f.substring(f.indexOf(a+">")+a.length+1),b=b.substring(0,b.indexOf("<")));return b!==t?Number(b):null},c=g("GPano:FullPanoWidthPixels"),d=g("GPano:CroppedAreaImageWidthPixels"),h=g("GPano:FullPanoHeightPixels"),k=g("GPano:CroppedAreaImageHeightPixels"),l=g("GPano:CroppedAreaTopPixels"),m=g("GPano:PoseHeadingDegrees"),n=g("GPano:PosePitchDegrees"),g=g("GPano:PoseRollDegrees");null!==c&&null!==d&&null!==h&&null!==k&&null!==l&&(b.haov=d/c*360,b.vaov=k/h*180,b.vOffset=-180*((l+k/
2)/h-0.5),null!==m&&(b.northOffset=m,!1!==b.compass&&(b.compass=!0)),null!==n&&null!==g&&(D.horizonPitch=n/180*Math.PI,D.horizonRoll=g/180*Math.PI))}D.src=z.URL.createObjectURL(a)});p.readAsBinaryString!==t?p.readAsBinaryString(a):p.readAsText(a)}function e(a){r.errorMsg.innerHTML=a!==t?"<p>"+a+"</p>":"<p>Your browser does not have the necessary WebGL support to display this panorama.</p>";v.load.style.display="none";r.load.box.style.display="none";r.errorMsg.style.display="table";G.style.display=
"none"}function w(a){var b=M(a);O.style.left=b.x+"px";O.style.top=b.y+"px";clearTimeout(w.t1);clearTimeout(w.t2);O.style.display="block";O.style.opacity=1;w.t1=setTimeout(function(){O.style.opacity=0},2E3);w.t2=setTimeout(function(){O.style.display="none"},2500);a.preventDefault()}function M(a){var b=l.getBoundingClientRect(),c={};c.x=a.clientX-b.left;c.y=a.clientY-b.top;return c}function Da(a){a.preventDefault();l.focus();if(H){var p=M(a);b.hotSpotDebug&&(a=na(a),console.log("Pitch: "+a[0]+", Yaw: "+
a[1]+", Center Pitch: "+b.pitch+", Center Yaw: "+b.yaw+", HFOV: "+b.hfov),z.position_data={pitch:a[0],yaw:a[1],center_pitch:b.pitch,center_yaw:b.yaw,hfov:b.hfov});b.autoRotate=!1;z.removeEventListener("deviceorientation",c);b.roll=0;S=!0;T=Date.now();da=p.x;ea=p.y;qa=b.yaw;ra=b.pitch;l.classList.add("pnlm-grabbing");l.classList.remove("pnlm-grab");f()}}function na(a){var p=M(a),c=E.getCanvas();a=p.x/c.width*2-1;var d=(1-p.y/c.height*2)*c.height/c.width,f=1/Math.tan(b.hfov*Math.PI/360),e=Math.sin(b.pitch*
Math.PI/180),g=Math.cos(b.pitch*Math.PI/180),p=f*g-d*e,c=Math.sqrt(a*a+p*p),d=180*Math.atan((d*g+f*e)/c)/Math.PI;a=180*Math.atan2(a/c,p/c)/Math.PI+b.yaw;return[d,a]}function V(a){if(S&&H){T=Date.now();var p=E.getCanvas();a=M(a);var c=180*(Math.atan(da/p.width*2-1)-Math.atan(a.x/p.width*2-1))/Math.PI*b.hfov/90+qa;I=(c-b.yaw)%360*0.2;b.yaw=c;c=360*Math.atan(Math.tan(b.hfov/360*Math.PI)*p.height/p.width)/Math.PI;p=180*(Math.atan(a.y/p.height*2-1)-Math.atan(ea/p.height*2-1))/Math.PI*c/90+ra;J=0.2*(p-
b.pitch);b.pitch=p}}function ga(){S&&(S=!1,15<Date.now()-T&&(J=I=0),l.classList.add("pnlm-grab"),l.classList.remove("pnlm-grabbing"))}function ia(a){if(H){b.autoRotate=!1;z.removeEventListener("deviceorientation",c);b.roll=0;var p=M(a.targetTouches[0]);da=p.x;ea=p.y;2==a.targetTouches.length&&(a=M(a.targetTouches[1]),da+=0.5*(a.x-p.x),ea+=0.5*(a.y-p.y),ka=Math.sqrt((p.x-a.x)*(p.x-a.x)+(p.y-a.y)*(p.y-a.y)));S=!0;T=Date.now();qa=b.yaw;ra=b.pitch;f()}}function Z(a){a.preventDefault();H&&(T=Date.now());
if(S&&H){var p=M(a.targetTouches[0]),c=p.x,d=p.y;2==a.targetTouches.length&&-1!=ka&&(a=M(a.targetTouches[1]),c+=0.5*(a.x-p.x),d+=0.5*(a.y-p.y),p=Math.sqrt((p.x-a.x)*(p.x-a.x)+(p.y-a.y)*(p.y-a.y)),B(b.hfov+0.1*(ka-p)),ka=p);c=0.1*(da-c)+qa;I=(c-b.yaw)%360*0.2;b.yaw=c;d=0.1*(d-ea)+ra;J=0.2*(d-b.pitch);b.pitch=d}}function ja(){S=!1;150<Date.now()-T&&(J=I=0);ka=-1}function ua(a){"touch"==a.pointerType&&(U.push(a.pointerId),la.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=la,ia(a),a.preventDefault(),
z.removeEventListener("deviceorientation",c),b.roll=0)}function Y(a){if("touch"==a.pointerType)for(var b=0;b<U.length;b++)if(a.pointerId==U[b]){la[b]={clientX:a.clientX,clientY:a.clientY};a.targetTouches=la;Z(a);break}}function s(a){if("touch"==a.pointerType){for(var b=!1,c=0;c<U.length;c++)a.pointerId==U[c]&&(U[c]=t),U[c]&&(b=!0);b||(U=[],la=[],ja());a.preventDefault()}}function d(a){a.preventDefault();H&&(T=Date.now(),a.wheelDeltaY?(B(b.hfov-0.05*a.wheelDeltaY),K=0>a.wheelDelta?1:-1):a.wheelDelta?
(B(b.hfov-0.05*a.wheelDelta),K=0>a.wheelDelta?1:-1):a.detail&&(B(b.hfov+1.5*a.detail),K=0<a.detail?1:-1),f())}function a(a){a.preventDefault();b.autoRotate=!1;z.removeEventListener("deviceorientation",c);b.roll=0;var p=a.keycode;a.which&&(p=a.which);27==p?sa&&ta():$(p,!0)}function pa(){for(var a=0;10>a;a++)n[a]=!1}function L(a){a.preventDefault();var b=a.keycode;a.which&&(b=a.which);$(b,!1)}function $(a,b){var c=!1;switch(a){case 109:case 189:case 17:n[0]!=b&&(c=!0);n[0]=b;break;case 107:case 187:case 16:n[1]!=
b&&(c=!0);n[1]=b;break;case 38:n[2]!=b&&(c=!0);n[2]=b;break;case 87:n[6]!=b&&(c=!0);n[6]=b;break;case 40:n[3]!=b&&(c=!0);n[3]=b;break;case 83:n[7]!=b&&(c=!0);n[7]=b;break;case 37:n[4]!=b&&(c=!0);n[4]=b;break;case 65:n[8]!=b&&(c=!0);n[8]=b;break;case 39:n[5]!=b&&(c=!0);n[5]=b;break;case 68:n[9]!=b&&(c=!0),n[9]=b}c&&b&&(fa="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),f())}function aa(){if(H){var a=b.pitch,c=b.yaw,d=b.hfov,f;f="undefined"!==typeof performance&&performance.now()?
performance.now():Date.now();fa===t&&(fa=f);var e=(f-fa)*b.hfov/1700,e=Math.min(e,1);n[0]&&!0===b.keyboardZoom&&B(b.hfov+(0.8*K+0.5)*e);n[1]&&!0===b.keyboardZoom&&B(b.hfov+(0.8*K-0.2)*e);if(n[2]||n[6])b.pitch+=(0.8*J+0.2)*e;if(n[3]||n[7])b.pitch+=(0.8*J-0.2)*e;if(n[4]||n[8])b.yaw+=(0.8*I-0.2)*e;if(n[5]||n[9])b.yaw+=(0.8*I+0.2)*e;Date.now();b.autoRotate&&!1!==b.autoRotateStopDelay&&(1E-6<e&&(b.yaw-=b.autoRotate/60*e),b.autoRotateStopDelay&&(b.autoRotateStopDelay-=f-fa,0>=b.autoRotateStopDelay&&(b.autoRotateStopDelay=
!1)));0<e&&(n[4]||n[5]||n[8]||n[9]||(b.yaw+=I*e*0.85),n[2]||n[3]||n[6]||n[7]||(b.pitch+=J*e*0.85),n[0]||n[1]||B(b.hfov+K*e*0.85));fa=f;0<e&&(I=0.8*I+(b.yaw-c)/e*0.2,J=0.8*J+(b.pitch-a)/e*0.2,K=0.8*K+(b.hfov-d)/e*0.2,I=Math.min(5,Math.max(I,-5)),J=Math.min(5,Math.max(J,-5)),K=Math.min(5,Math.max(K,-5)));n[0]&&n[0]&&(K=0);(n[2]||n[6])&&(n[3]||n[7])&&(J=0);(n[4]||n[8])&&(n[5]||n[9])&&(I=0)}}function X(){E.resize();f();ha()}function f(){va||(va=!0,F())}function F(){Ea();if(S)requestAnimationFrame(F);
else if(n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7]||n[8]||n[9]||b.autoRotate||0.01<Math.abs(I)||0.01<Math.abs(J)||0.01<Math.abs(K))aa(),requestAnimationFrame(F);else if(E&&(E.isLoading()||!0===b.dynamic&&Ba))requestAnimationFrame(F);else{va=!1;var a=b.autoRotateInactivityDelay-(Date.now()-T);0<a&&(wa&&clearTimeout(wa),wa=setTimeout(function(){b.autoRotate=!0;F()},a))}}function Ea(){var a;H&&(180<b.yaw?b.yaw-=360:-180>b.yaw&&(b.yaw+=360),a=b.yaw,b.yaw=Math.max(b.minYaw,Math.min(b.maxYaw,b.yaw)),
!1!==b.autoRotate&&a!=b.yaw&&(b.autoRotate*=-1),b.pitch=Math.max(b.minPitch,Math.min(b.maxPitch,b.pitch)),E.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{roll:b.roll*Math.PI/180}),u(),b.compass&&(ma.style.transform="rotate("+(-b.yaw-b.northOffset)+"deg)",ma.style.webkitTransform="rotate("+(-b.yaw-b.northOffset)+"deg)"))}function g(a,b,c,d){this.w=a;this.x=b;this.y=c;this.z=d}function c(a){var c;c=a.alpha;var d=a.beta;a=a.gamma;d=[d?d*Math.PI/180/2:0,a?a*Math.PI/180/2:0,c?c*Math.PI/
180/2:0];c=[Math.cos(d[0]),Math.cos(d[1]),Math.cos(d[2])];d=[Math.sin(d[0]),Math.sin(d[1]),Math.sin(d[2])];c=new g(c[0]*c[1]*c[2]-d[0]*d[1]*d[2],d[0]*c[1]*c[2]-c[0]*d[1]*d[2],c[0]*d[1]*c[2]+d[0]*c[1]*d[2],c[0]*c[1]*d[2]+d[0]*d[1]*c[2]);c=c.multiply(new g(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));d=z.orientation?-z.orientation*Math.PI/180/2:0;c=c.multiply(new g(Math.cos(d),0,-Math.sin(d),0)).toEulerAngles();b.pitch=c[0]/Math.PI*180;b.roll=-c[1]/Math.PI*180;b.yaw=-c[2]/Math.PI*180+b.northOffset;F()}function k(){if(P!==
t&&(P.destroy(),b.sceneFadeDuration&&P.fadeImg!==t)){P.fadeImg.style.opacity=0;var a=P.fadeImg;P=t;setTimeout(function(){G.removeChild(a)},b.sceneFadeDuration)}ma.style.display=b.compass?"inline":"none";q();r.load.box.style.display="none";W!==t&&(G.removeChild(W),W=t);H=!0;f()}function q(){xa||(b.hotSpots?(b.hotSpots=b.hotSpots.sort(function(a,b){return a.pitch<b.pitch}),b.hotSpots.forEach(function(a){var c=h.createElement("div");c.className="pnlm-hotspot pnlm-tooltip pnlm-sprite pnlm-"+oa(a.type);
var d=h.createElement("span");a.text&&(d.innerHTML=oa(a.text));var e;if(a.video){e=h.createElement("video");var f=a.video;b.basePath&&!ba(f)&&(f=b.basePath+f);e.src=encodeURI(f);e.controls=!0;e.style.width=a.width+"px";G.appendChild(c);d.appendChild(e)}else if(a.image){f=a.image;b.basePath&&!ba(f)&&(f=b.basePath+f);e=h.createElement("a");e.href=encodeURI(a.URL?a.URL:f);e.target="_blank";d.appendChild(e);var g=h.createElement("img");g.src=encodeURI(f);g.style.width=a.width+"px";g.style.paddingTop=
"5px";G.appendChild(c);e.appendChild(g);d.style.maxWidth="initial"}else a.URL?(e=h.createElement("a"),e.href=encodeURI(a.URL),e.target="_blank",G.appendChild(e),c.style.cursor="pointer",d.style.cursor="pointer",e.appendChild(c)):(a.sceneId&&(c.onclick=function(){m(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov);return!1},c.ontouchend=function(){m(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov);return!1},c.style.cursor="pointer",d.style.cursor="pointer"),G.appendChild(c));c.appendChild(d);d.style.width=
d.scrollWidth-20+"px";d.style.marginLeft=-(d.scrollWidth-26)/2+"px";d.style.marginTop=-d.scrollHeight-12+"px";a.div=c})):b.hotSpots=[],xa=!0,u())}function u(){b.hotSpots.forEach(function(a){var c=Math.sin(a.pitch*Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),g=Math.cos((-a.yaw+b.yaw)*Math.PI/180),h=Math.tan(b.hfov*Math.PI/360),k=c*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=k||(90<a.yaw||-90>=a.yaw)&&0>=k)a.div.style.visibility="hidden";else{a.div.style.visibility=
"visible";var l=E.getCanvas(),m=l.width/(z.devicePixelRatio||1),l=l.height/(z.devicePixelRatio||1),c="translate("+(-m/h*Math.sin((-a.yaw+b.yaw)*Math.PI/180)*d/k/2+m/2-13)+"px, "+(-m/h*(c*f-d*g*e)/k/2+l/2-13)+"px) translateZ(9999px)";a.div.style.webkitTransform=c;a.div.style.MozTransform=c;a.div.style.transform=c}})}function x(a){b={};var c,d=["haov","vaov","vOffset","northOffset"];for(c in ya)ya.hasOwnProperty(c)&&(b[c]=ya[c]);for(c in y.default)y.default.hasOwnProperty(c)&&(b[c]=y.default[c],0<=
d.indexOf(c)&&(b.ignoreGPanoXMP=!0));if(null!==a&&""!==a&&y.scenes&&y.scenes[a]){var e=y.scenes[a];for(c in e)e.hasOwnProperty(c)&&(b[c]=e[c],0<=d.indexOf(c)&&(b.ignoreGPanoXMP=!0));b.scene=a}for(c in y)y.hasOwnProperty(c)&&(b[c]=y[c],0<=d.indexOf(c)&&(b.ignoreGPanoXMP=!0))}function A(){if("preview"in b){var a=b.preview;b.basePath&&(a=b.basePath+a);W=h.createElement("div");W.className="pnlm-preview-img";W.style.backgroundImage="url('"+encodeURI(a)+"')";G.appendChild(W)}for(var c in b)if(b.hasOwnProperty(c))switch(c){case "title":r.title.innerHTML=
oa(b[c]);r.container.style.display="inline";break;case "author":r.author.innerHTML="by "+oa(b[c]);r.container.style.display="inline";break;case "fallback":r.errorMsg.innerHTML='<p>Your browser does not support WebGL.<br><a href="'+encodeURI(b[c])+'" target="_blank">Click here to view this panorama in an alternative viewer.</a></p>';break;case "hfov":B(Number(b[c]));break;case "pitch":b.pitch=Math.max(b.minPitch,Math.min(b.maxPitch,b.pitch));break;case "autoLoad":!0===b[c]&&P===t&&(r.load.box.style.display=
"inline",v.load.style.display="none",Q());break;case "showZoomCtrl":v.zoom.style.display=b[c]?"block":"none";break;case "showFullscreenCtrl":v.fullscreen.style.display=b[c]&&("fullscreen"in h||"mozFullScreen"in h||"webkitIsFullScreen"in h||"msFullscreenElement"in h)?"block":"none"}}function ta(){if(H&&!Ca)if(sa)h.exitFullscreen?h.exitFullscreen():h.mozCancelFullScreen?h.mozCancelFullScreen():h.webkitCancelFullScreen?h.webkitCancelFullScreen():h.msExitFullscreen&&h.msExitFullscreen();else try{l.requestFullscreen?
l.requestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.msRequestFullscreen?l.msRequestFullscreen():l.webkitRequestFullScreen()}catch(a){}}function ha(){h.fullscreen||h.mozFullScreen||h.webkitIsFullScreen||h.msFullscreenElement?(v.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),sa=!0):(v.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),sa=!1)}function B(a){var c=b.minHfov;"multires"==b.type&&E&&(c=Math.min(c,E.getCanvas().width/(b.multiRes.cubeResolution/
90*0.9)));c>=b.maxHfov?console.log("HFOV bounds do not make sense (minHfov >= maxHfov)."):b.hfov=a<c?c:a>b.maxHfov?b.maxHfov:a}function C(){r.load.box.style.display="none";r.errorMsg.style.display="none";Ca=!1;v.load.style.display="none";r.load.box.style.display="inline";Q()}function m(a,c,d,e){H=!1;P=E;var f;if(b.sceneFadeDuration){f=new Image;f.className="pnlm-fade-img";f.style.transition="opacity "+b.sceneFadeDuration/1E3+"s";f.style.width="100%";f.style.height="100%";var g=E.render(b.pitch*Math.PI/
180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{returnImage:!0});g!==t&&(f.src=g);G.appendChild(f);P.fadeImg=f}c="same"===c?b.pitch:c;d="same"===d?b.yaw:"sameAzimuth"===d?b.yaw+b.northOffset-y.scenes[a].northOffset:d;e="same"===e?b.hfov:e;if(b.hotSpots)for(f=0;f<b.hotSpots.length;f++){for(g=b.hotSpots[f].div;g.parentNode!=G;)g=g.parentNode;G.removeChild(g);delete b.hotSpots[f].div}xa=!1;delete b.hotSpots;x(a);A();c&&(b.pitch=c);d&&(b.yaw=d);e&&(b.hfov=e);C()}function oa(a){return String(a).replace(/&/g,
"&amp;").replace('"',"&quot;").replace("'","&#39;").replace("<","&lt;").replace(">","&gt;").replace("/","&#x2f;")}var b,E,P,W,S=!1,T=Date.now(),da=0,ea=0,ka=-1,qa=0,ra=0,n=Array(10),sa=!1,H=!1,Ca=!1,Aa=!1,D,fa,I=0,J=0,K=0,va=!1,wa,Ba=!1,xa=!1,ya={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:-85,maxPitch:85,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,keyboardZoom:!0};
l="string"===typeof l?h.getElementById(l):l;l.className+=" pnlm-container";l.tabIndex=0;var G=h.createElement("div");G.className="pnlm-render-container";l.appendChild(G);var za=h.createElement("div");za.className="pnlm-dragfix";l.appendChild(za);var O=h.createElement("span");O.className="pnlm-about-msg";O.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a> 22ff9ab';l.appendChild(O);za.addEventListener("contextmenu",w);var r={};r.container=h.createElement("div");r.container.className=
"pnlm-panorama-info";r.title=h.createElement("div");r.title.className="pnlm-title-box";r.container.appendChild(r.title);r.author=h.createElement("div");r.author.className="pnlm-author-box";r.container.appendChild(r.author);l.appendChild(r.container);r.load={};r.load.box=h.createElement("div");r.load.box.className="pnlm-load-box";r.load.box.innerHTML="<p>Loading...</p>";r.load.lbox=h.createElement("div");r.load.lbox.className="pnlm-lbox";r.load.lbox.innerHTML='<div class="pnlm-loading"></div>';r.load.box.appendChild(r.load.lbox);
r.load.lbar=h.createElement("div");r.load.lbar.className="pnlm-lbar";r.load.lbarFill=h.createElement("div");r.load.lbarFill.className="pnlm-lbar-fill";r.load.lbar.appendChild(r.load.lbarFill);r.load.box.appendChild(r.load.lbar);r.load.msg=h.createElement("p");r.load.msg.className="pnlm-lmsg";r.load.box.appendChild(r.load.msg);l.appendChild(r.load.box);r.errorMsg=h.createElement("div");r.errorMsg.className="pnlm-error-msg pnlm-info-box";l.appendChild(r.errorMsg);var v={};v.container=h.createElement("div");
v.container.className="pnlm-controls-container";l.appendChild(v.container);v.load=h.createElement("div");v.load.className="pnlm-load-button";v.load.innerHTML="<p>Click to<br>Load<br>Panorama<p>";v.load.addEventListener("click",C);l.appendChild(v.load);v.zoom=h.createElement("div");v.zoom.className="pnlm-zoom-controls pnlm-controls";v.zoomIn=h.createElement("div");v.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";v.zoomIn.addEventListener("click",function(){H&&B(b.hfov-5)});v.zoom.appendChild(v.zoomIn);
v.zoomOut=h.createElement("div");v.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";v.zoomOut.addEventListener("click",function(){H&&B(b.hfov+5)});v.zoom.appendChild(v.zoomOut);v.container.appendChild(v.zoom);v.fullscreen=h.createElement("div");v.fullscreen.addEventListener("click",ta);v.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";(h.fullscreenEnabled||h.mozFullScreenEnabled||h.webkitFullscreenEnabled)&&
v.container.appendChild(v.fullscreen);v.orientation=h.createElement("div");v.orientation.addEventListener("click",function(a){z.addEventListener("deviceorientation",c)});v.orientation.className="pnlm-orientation-button pnlm-sprite pnlm-controls pnlm-control";z.DeviceOrientationEvent&&z.addEventListener("deviceorientation",function(a){z.removeEventListener("deviceorientation",this);a&&v.container.appendChild(v.orientation)});var ma=h.createElement("div");ma.className="pnlm-compass pnlm-controls pnlm-control";
l.appendChild(ma);y.firstScene?x(y.firstScene):y.default&&y.default.firstScene?x(y.default.firstScene):x(null);A();var U=[],la=[];g.prototype.multiply=function(a){return new g(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)};g.prototype.toEulerAngles=function(){var a=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),b=Math.asin(2*(this.w*this.y-
this.z*this.x)),c=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[a,b,c]};this.getPitch=function(){return b.pitch};this.setPitch=function(a){b.pitch=Math.max(b.minPitch,Math.min(b.maxPitch,a));return this};this.getPitchBounds=function(){return[b.minPitch,b.maxPitch]};this.setPitchBounds=function(a){b.minPitch=Math.max(-90,Math.min(a[0],90));b.maxPitch=Math.max(-90,Math.min(a[1],90));return this};this.getYaw=function(){return b.yaw};this.setYaw=function(a){for(;180<
a;)a-=360;for(;-180>a;)a+=360;b.yaw=Math.max(b.minYaw,Math.min(b.maxYaw,a));return this};this.getYawBounds=function(){return[b.minYaw,b.maxYaw]};this.setYawBounds=function(a){b.minYaw=Math.max(-180,Math.min(a[0],180));b.maxYaw=Math.max(-180,Math.min(a[1],180));return this};this.getHfov=function(){return b.hfov};this.setHfov=function(a){B(a);return this};this.getHfovBounds=function(){return[b.minHfov,b.maxHfov]};this.setHfovBounds=function(a){b.minHfov=Math.max(0,a[0]);b.maxHfov=Math.max(0,a[1]);return this};
this.getNorthOffset=function(){return b.northOffset};this.setNorthOffset=function(a){b.northOffset=Math.max(360,Math.min(0,a));return this};this.getRenderer=function(){return E};this.setUpdate=function(a){Ba=!0===a;E===t?ca():requestAnimationFrame(F);return this};this.mouseEventToCoords=function(a){return na(a)};this.loadScene=function(a,b,c,d){m(a,b,c,d);return this};this.getScene=function(){return b.scene};this.toggleFullscreen=function(){ta();return this}}return{viewer:function(h,t){return new Q(h,
t)}}}(window,document);
